webpackJsonp([2],{MRzG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{formData:{img:""},token:""}},methods:{upload:function(t){this.formData.img="http://image.yaojunrong.com/"+t.key},getToken:function(){var t=this;this.$axios.qiniuGet().then(function(e){t.token=e.data})},upData:function(){var t=this;this.$axios.post("addSwiper",{img:this.formData.img}).then(function(e){200==e.code&&(t.$message({message:"图片上传成功！！！",type:"success"}),setTimeout(function(){t.$router.push("/swiper")},1e3))})},getUpdateData:function(){var t=this,e=this.$route.query.id;this.$axios.get("getSwiper",{id:e}).then(function(e){200==e.code&&(console.log(e),t.formData=e.data[0])})},saveEdit:function(){var t=this,e=this.$route.query.id,a=this.formData.img;this.$axios.post("updateSwiper",{id:e,img:a}).then(function(e){200==e.code&&(t.$message({message:"图片修改成功！！！",type:"success"}),setTimeout(function(){t.$router.push("/swiper")},1e3))})}},created:function(){this.getToken(),"轮播图修改页"==this.$route.name&&this.getUpdateData()},watch:{$route:function(t,e,a){"轮播图添加页"==t.name&&(this.formData={img:""})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add"},[a("el-form",{attrs:{model:t.formData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com","show-file-list":!1,"on-success":t.upload,data:{token:t.token}}},[t.formData.img?a("img",{staticClass:"avatar",attrs:{src:t.formData.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",["轮播图添加页"==t.$route.name?a("el-button",{on:{click:t.upData}},[t._v("上传")]):t._e()],1),t._v(" "),a("el-form-item",["轮播图修改页"==t.$route.name?a("el-button",{on:{click:t.saveEdit}},[t._v("保存修改")]):t._e()],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(t){a("m08+"),a("P/dk")},"data-v-48f02b4a",null);e.default=s.exports},"P/dk":function(t,e){},"m08+":function(t,e){}});
//# sourceMappingURL=2.378dd7fd2e1c89185d2f.js.map